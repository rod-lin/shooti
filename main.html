<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<meta http-equiv="Pragma" content="no-cache">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

		<link href="css/style.css" rel="stylesheet" />
		<link href="css/overw.css" rel="stylesheet" />
		<link href="css/font.css" rel="stylesheet" />

		<script src="js/jquery.js"></script>
	</head>

	<body>
		<div class="back-view">
			<div class="mini-prompt" style="font-size: 4rem; margin-top: 1.5rem;">
			</div>
		</div>
		<div class="main-view">
			<div id="impress">
				<div class="dim-all step"></div>
				<div class="centered step clear auto" data-auto-delay="3000" style="font-size: 5em;" data-x="0" data-y="0" data-scale="1">
					<span class="shake">
						<span class="blue foci-logo" style="font-size: 80%;"></span><b class="brandon">Foci</b>
					</span>
					<!-- <div class="veneer hexpand" style="font-size: 40%; padding-left: 2rem; margin-top: 1rem;" data-exp-delay="2000">
						<span>Explore Your <span class="blue">Infinity</span></span>
					</div> -->
				</div>

				<div class="centered step auto" data-auto-delay="1700" style="font-size: 5em;" data-rel-y="100">
					Get Started
				</div>

				<div class="centered step show-mini show-video auto"
				data-mini-prompt="0:Login"
				data-video-src="video/log-in.mov" data-rel-z="1000"></div>
			
				<div class="centered step hide-mini auto" data-auto-delay="1700" style="font-size: 5em;" data-rel-z="1000">
					Keep Connected
				</div>

				<div class="centered step show-mini show-video auto"
				data-mini-prompt="0:Chat"
				data-video-src="video/chat.mov" data-rel-z="1000"></div>

				<div class="centered step hide-mini auto" data-auto-delay="1700" style="font-size: 7em;" data-rel-z="1000">
					Foci <span class="shake">
						<span class="orange">O</span><span class="blue">S</span><span class="green">P</span>
					</span> System
				</div>

				<div class="centered step hide-mini auto" data-auto-delay="1700" style="font-size: 7em;" data-rel-rotate-y="360">
					<span class="orange">O</span> for <span class="orange">O</span>rganizers
				</div>

				<div class="centered step show-mini show-video auto"
				data-mini-prompt="0:Create an Event"
				data-video-src="video/create-event.mov" data-rel-z="1000"></div>

				<div class="centered step hide-mini auto" data-auto-delay="1500" style="font-size: 7em;" data-rel-z="1000">
					<span class="blue">S</span> for <span class="blue">S</span>taff
				</div>

				<div class="centered step hide-mini auto" data-auto-delay="1500" style="font-size: 7em;" data-rel-rotate-x="360">
					<span class="green">P</span> for <span class="green">P</span>articipants
				</div>

				<div class="centered step show-mini show-video auto"
				data-mini-prompt="0:Event Registration"
				data-video-src="video/event-registration.mov" data-rel-z="1000"></div>

				<div class="centered step hide-mini auto" data-auto-delay="800" style="font-size: 5em;" data-rel-z="1000">
					<span class="purple">Art</span> Exhibition
				</div>

				<div class="centered step hide-mini auto" data-auto-delay="500" style="font-size: 5em;" data-rel-rotate-x="180">
					<span class="red">Basketball</span> Match
				</div>

				<div class="centered step hide-mini auto" data-auto-delay="500" style="font-size: 5em;" data-rel-rotate-x="180">
					<span class="blue">Debate</span> Seminar
				</div>

				<div class="centered step hide-mini auto" data-auto-delay="500" style="font-size: 5em;" data-rel-rotate-x="180">
					<span class="red">Hack</span>aton
				</div>

				<div class="centered step hide-mini auto" data-auto-delay="500" style="font-size: 5em;" data-rel-rotate-x="180">
					<span class="green">Volunteer</span> Work
				</div>

				<div class="centered step hide-mini auto" data-auto-delay="2500" style="font-size: 5em;" data-rel-rotate-y="180">
					<span class="blue">All</span></span> In <span class="red">One</span> Platform
				</div>

				<div class="centered step show-mini show-video auto"
				data-mini-prompt="0:Event Plaza"
				data-video-src="video/plaza.mov" data-rel-z="1000"></div>

				<div class="centered step hide-mini auto" data-auto-delay="1700" style="font-size: 5em;" data-rel-x="-1200" data-rel-y="500" data-rel-rotate-z="45">
					Work With Your <span class="blue">Friends</span>
				</div>

				<div class="centered step show-mini show-video auto"
				data-mini-prompt="0:Edit Organizers"
				data-video-src="video/edit-organizers.mov" data-rel-z="1000" data-rel-rotate-y="180"></div>

				<div class="centered wide step hide-mini auto" data-auto-delay="1700" style="font-size: 5em;" data-rel-z="1000">
					Easy <span class="red">Application</span> Processing
				</div>

				<div class="centered transparent step show-mini no-shadow half show-video auto"
				data-mini-prompt="0:Application &amp; Review"
				data-sub-video-src="video/appcent-2.mov"
				data-video-src="video/appcent-1.mov" data-rel-z="1000"></div>

				<div class="centered wide step hide-mini auto" data-auto-delay="1700" style="font-size: 5em;" data-rel-z="1000">
					Create <span class="blue">Clubs</span>
				</div>

				<div class="centered step show-mini show-video auto"
				data-mini-prompt="0:New Club;12000:Discussion &amp; Meetings;40500:Assigning Tasks;50500:Manage Club Members"
				data-video-src="video/club.mov" data-rel-z="1000"></div>

				<div class="centered wide step hide-mini auto" data-auto-delay="1700" style="font-size: 5em;" data-rel-z="1000">
					Discover More <span class="blue">Opportunities</span>
				</div>

				<div class="centered step show-mini show-video auto"
				data-mini-prompt="0:Club Utilities;6700:McOriginal Care &amp; Incubator"
				data-video-src="video/incubator.mov" data-rel-z="1000"></div>

				<div class="centered wide step hide-mini auto" data-auto-delay="1700" style="font-size: 5em;" data-rel-z="1000">
					Work with Your <span class="purple">Mentors</span>
				</div>

				<div class="centered step show-mini show-video auto ext-copyright"
				data-mini-prompt="0:Social Activists &amp; Student Pioneers*"
				data-video-src="video/mentor.mov" data-rel-z="1000"
				data-ext-copyright="*Content in this clip is not from Foci but from Google Gmail and Microsoft Office."></div>

				<div class="centered step hide-mini auto" data-auto-delay="3000" style="font-size: 5em;" data-rel-z="5000">
					<div style="display: inline-block;">
						Through <span class="blue">Foci</span>,
						<div style="font-size: 92%;"><span class="green">Think</span> <span class="red">Forward</span></div>
					</div>
				</div>

				<div class="centered step clear auto expand-cont ext-copyright" data-ext-copyright="Video by Jason and Rod" data-auto-delay="5000" style="font-size: 5em;" data-rel-rotate-x="-180" data-rel-rotate-y="-180" data-rel-rotate-z="-180">
					<span class="shake" data-shake-delay="500">
						<span class="blue foci-logo" style="font-size: 80%;"></span><b class="brandon">Foci</b>
					</span>
					<div class="veneer hexpand" data-exp-height="48" style="font-size: 40%; padding-left: 2rem;" data-exp-delay="2000">
						<span>Explore Your <span class="blue">Infinity</span></span>
					</div>
				</div>

				<div class="centered step clear auto ext-copyright" data-ext-copyright="Video by Jason and Rod" data-auto-delay="2000" style="font-size: 5em;" data-rel-rotate-y="180">
					2018.1.1
				</div>

				<div class="centered step clear dim-all auto" data-auto-delay="5000" style="font-size: 5em;" data-rel-rotate-y="180">
					<div class="white">Coming soon.</div>
				</div>

				<div class="centered step clear dim-all"></div>
			</div>

			<video class="main-video full-video"></video>
			<video class="sub-video" autoplay></video>
		</div>

		<div class="copyright">Â© 2017 Fuyi Network Technology Inc. All rights reserved. <span class="copyright-ext"></span></div>
		
		<script src="js/impress.js"></script>
		<script>
			$(function () {
				var once = {};

				var rel_support = [ "x", "y", "z", "rotate", "rotate-x", "rotate-y", "rotate-z", "scale" ];

				$(".step").each(function (i, dom) {
					dom = $(dom);
					var prev = dom.prev();

					for (var i = 0; i < rel_support.length; i++) {
						var attr = rel_support[i];
						var v = dom.attr("data-rel-" + attr);
						var pattr = parseInt(prev.attr("data-" + attr)) || 0;

						if (v) {
							v = parseInt(v);
							dom.attr("data-" + attr, pattr + v);
						} else if (!dom.attr("data-" + attr)) {
							dom.attr("data-" + attr, pattr);
						}
					}
				});

				$(".step.ext-copyright").on("impress:stepenterin", function () {
					$(".copyright-ext").html($(this).attr("data-ext-copyright"));
				});

				$(".step.ext-copyright").on("impress:stepleave", function () {
					$(".copyright-ext").html("");
				});

				$(".step.dim-all").on("impress:stepenterin", function () {
					$(".main-view").addClass("dim-all");
				});

				$(".step.dim-all").on("impress:stepleave", function () {
					$(".main-view").removeClass("dim-all");
				});

				$("#step-whats-more").on("impress:stepenter", function () {
					if (once["whats-more"]) return;

					setTimeout(function () {
						$("#step-whats-more .remove").remove();
					}, 1000);

					var words = [
						"we ", "have ", "<span class='red'>great</span>",
						"<br><span class='green' style='font-size: 180%;'>projects!</span>"
					];

					var delay = 0;

					for (var i = 0; i < words.length; i++) {
						setTimeout((function (i) {
							return function () {
								$("#step-whats-more .prompt").append(words[i]);
							};
						})(i), delay += 1000);
					}
					
					once["whats-more"] = true;
				});

				var cur_hexp_proc = [];

				$(".step.expand-cont").on("impress:stepenterin", function () {
					$(this).find(".hexpand").each(function (i, dom) {
						var hexp = $(dom);
						var height = hexp.height();
						var fixed_height = hexp.attr("data-exp-height");
						
						hexp.css("height", "0");

						var delay = hexp.attr("data-exp-delay");

						cur_hexp_proc.push(setTimeout(function () {
							hexp.css("height", (fixed_height || height) + "px");
						}, 300 + (delay ? parseInt(delay) : 0)));
					});
				});

				$(".step.expand-cont").on("impress:stepleave", function () {
					for (var i = 0; i < cur_hexp_proc.length; i++) {
						clearTimeout(cur_hexp_proc[i]);
					}
				});

				var cur_auto_proc = null;

				$(".step.auto").on("impress:stepenterin", function () {
					var dom = $(this);
					var delay = dom.attr("data-auto-delay");

					if (delay) {
						delay = parseInt(delay);
						cur_auto_proc = setTimeout(function () {
							imp.next();
						}, delay);
					}
				});

				$(".step.auto").on("impress:stepleave", function () {
					clearTimeout(cur_auto_proc);
				});

				$(".step.dark").on("impress:stepenterin", function () {
					$(".main-view").addClass("dark");
				})

				$(".step.dark").on("impress:stepleave", function () {
					$(".main-view").removeClass("dark");
				});

				$(".step.transparent").on("impress:stepenterin", function () {
					$(".main-view").addClass("transparent");
				})

				$(".step.transparent").on("impress:stepleave", function () {
					$(".main-view").removeClass("transparent");
				});

				$(".step.clear").on("impress:stepenterin", function () {
					$(".main-view").addClass("clear");
				})

				$(".step.clear").on("impress:stepleave", function () {
					$(".main-view").removeClass("clear");
				});

				function setMiniPrompt(prompt) {
					$(".mini-prompt").html(prompt);
				}

				var cur_mini_prompt = [];

				function parseShowMiniPrompt(script) {
					var sep = script.split(";");

					for (var i = 0; i < sep.length; i++) {
						if (!sep[i]) continue;

						(function (conf) {
							var delay = parseInt(conf[0]);
							
							cur_mini_prompt.push(setTimeout(function () {
								setMiniPrompt(conf[1]);
							}, delay));
						})(sep[i].split(":"));
					}
				}

				function clearCurPrompt() {
					for (var i = 0; i < cur_mini_prompt.length; i++) {
						clearTimeout(cur_mini_prompt[i]);
					}

					cur_mini_prompt = [];
				}

				$(".show-mini").on("impress:stepenterin", function () {
					$(".main-view").addClass("mini");
					
					if ($(this).hasClass("no-shadow")) {
						$(".main-view").addClass("no-shadow");
					}

					parseShowMiniPrompt($(this).attr("data-mini-prompt"));
				});

				$(".show-mini").on("impress:stepleave", function () {
					clearCurPrompt();
				});

				$(".hide-mini").on("impress:stepenterin", function () {
					$(".main-view").removeClass("mini no-shadow");
				});

				$(".back-view").click(function () {
					$(".main-view").removeClass("mini no-shadow");
				});

				$(".shake").addClass("shake-on-show");

				$(".shake-on-show").closest(".step").on("impress:stepenterin", function () {
					var elem = $(this).find(".shake-on-show");

					elem.each(function (n, e) {
						var delay = $(e).attr("data-shake-delay");

						if (delay) delay = parseInt(delay);
						else delay = 500;

						// alert(delay);

						$(e).removeClass("shake");

						setTimeout(function () {
							$(e).addClass("shake");
						}, delay);
						// console.log(e);
					});

					// elem.addClass("shake");
				});

				$(".shake-on-show").closest(".step").on("impress:stepleave", function () {
					$(this).find(".shake-on-show").removeClass("shake");
				});

				var cur_video_id = 0;

				$(".show-video").on("impress:stepenterin", function () {
					var cur_id = ++cur_video_id;

					$(".main-view").addClass("video");

					if ($(this).hasClass("half")) {
						$(".main-view").addClass("half");
						($(".sub-video").attr("src", $(this).attr("data-sub-video-src")))[0].play();
					}

					if ($(this).hasClass("auto")) {
						$(".main-video")[0].onended = function () {
							if (cur_video_id === cur_id) {
								imp.next();
							}
						};
					}

					($(".main-video").attr("src", $(this).attr("data-video-src")))[0].play();
				});

				$(".show-video").on("impress:stepleave", function () {
					cur_video_id++;

					$(".main-view").removeClass("video");

					if ($(this).hasClass("half")) {
						$(".main-view").removeClass("half");
					}

					$(".main-video").attr("src", "");
				});

				var opt = {
					onFocus: function () {
						impress.lock();
					},

					onBlur: function () {
						impress.unlock();
					},

					onResize: function () {
						imp.init();
					}
				};

				// $("#frame-step-1").on("impress:stepenterin", function () {
				// 	$("#frame-1").addClass("show");
				// });

				// $("#frame-step-1").on("impress:stepleave", function () {
				// 	$("#frame-1").removeClass("show");
				// });

				var imp = impress();

				// var t1 = new InlineTerminal("#term-1", "localhost:3140", opt);
				// var t2 = new InlineTerminal("#term-2", "localhost:3140", opt);
				// var t3 = new InlineTerminal("#term-3", "localhost:3140", opt);

				// var t1 = new InlineTerminal("#term-1", "localhost:3140", opt);
				// var t2 = new InlineTerminal("#term-2", "localhost:3140", opt);
				
				imp.init();
			});
		</script>
	</body>
</html>
